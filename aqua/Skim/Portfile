# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           xcode 1.0

name                Skim
if {${os.major} >= 14} {
    # 10.10+
    version         1.6.21
} elseif {${os.major} >= 11} {
    # 10.7+
    version         1.5.13
} elseif {${os.major} >= 10} {
    # 10.6+
    version         1.4.41
} elseif {${os.major} >= 9} {
    # 10.5+
    # TODO: For PPC devices, Skim version 1.3.7 and higher seem to run into an unresolved system bug.
    version         1.3.22
} else {
    # 10.4+
    version         1.2.7
}
categories          aqua
platforms           macosx
license             BSD
maintainers         nomaintainer
description         PDF reader and note-taker for OS X
long_description    Skim is a PDF reader and note-taker for OS X. It is \
                    designed to help you read and annotate scientific papers \
                    in PDF, but is also great for viewing any PDF file. \
                    \
                    Stop printing and start skimming.

homepage            https://skim-app.sourceforge.io

fetch.type          svn
set svn_tag         REL_[string map {. _} ${version}]
svn.url             https://svn.code.sf.net/p/skim-app/code/tags/${svn_tag}/
worksrcdir          ${svn_tag}

#patchfiles-append   xcodeproj-no-sparkle.patch

xcode.project       Skim.xcodeproj
build.target        Skim
destroot.target     Skim
xcode.configuration Release

# This should be removed if/when dealt with in the xcode portgroup; see:
# https://trac.macports.org/ticket/57137
# if {[vercmp $xcodeversion 5.0] >= 0} {
#     xcode.scheme        Skim
#
#     build.pre_args      -derivedDataPath ${worksrcpath}/DerivedData
#     destroot.pre_args   -derivedDataPath ${worksrcpath}/DerivedData
# }
